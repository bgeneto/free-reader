================================================================================
Summary Cache Key Demonstration
================================================================================

Test 1: Same URL, Source, Language (Should produce same cache key)
--------------------------------------------------------------------------------
Input URLs:
  - https://example.com/article?source=smry-fast&sidebar=true
  - https://example.com/article/
  - https://example.com/article

Generated Cache Keys:
  - summary:smry-fast:en:https://example.com/article
  - summary:smry-fast:en:https://example.com/article
  - summary:smry-fast:en:https://example.com/article

✓ All normalize to same key: YES

Test 2: Different Sources (Should produce different cache keys)
--------------------------------------------------------------------------------
Source: Quick (smry-fast)
  Cache Key: summary:smry-fast:en:https://example.com/article

Source: Precise (smry-slow)
  Cache Key: summary:smry-slow:en:https://example.com/article

Source: Wayback
  Cache Key: summary:wayback:en:https://example.com/article

Source: Jina.ai
  Cache Key: summary:jina.ai:en:https://example.com/article

✓ All keys are unique: YES

Test 3: Different Languages (Should produce different cache keys)
--------------------------------------------------------------------------------
Language: English (en)
  Cache Key: summary:smry-fast:en:https://example.com/article

Language: Spanish (es)
  Cache Key: summary:smry-fast:es:https://example.com/article

Language: French (fr)
  Cache Key: summary:smry-fast:fr:https://example.com/article

Language: German (de)
  Cache Key: summary:smry-fast:de:https://example.com/article

✓ All keys are unique: YES

Test 4: URL with Query Parameters (Should preserve non-app params)
--------------------------------------------------------------------------------
Input URL:
  https://example.com/article?id=123&page=2&source=smry-fast&sidebar=true

Normalized URL (app params stripped):
  https://example.com/article?id=123&page=2

Cache Key:
  summary:smry-fast:en:https://example.com/article?id=123&page=2

✓ App params (source, sidebar) removed: YES
✓ Original params (id, page) preserved: YES

================================================================================
Summary
================================================================================
✓ URLs are normalized consistently before cache key generation
✓ App-specific query parameters (source, view, sidebar) are removed
✓ Trailing slashes are normalized
✓ Cache keys include: source, language, and normalized URL
✓ Different sources/languages create separate cache entries
================================================================================
